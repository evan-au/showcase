<ui-layout [inputCartMode]="true">
  <mat-drawer-container
    utilsBreakpointCheckMobile
    (outputIsBreakpointMatchingMobile)="isBreakpointMatching($event)"
    class="h-full w-full"
    [hasBackdrop]="isViewOnMobile"
  >
    <mat-drawer
      [opened]="!isViewOnMobile"
      #drawer
      class="w-full lg:w-1/5 p-8"
      [mode]="isViewOnMobile ? 'over' : 'side'"
    >
      <section class="h-full flex flex-col gap-6">
        <ng-container *ngIf="isViewOnMobile">
          <div
            class="flex items-center justify-between py-2 text-xs text-gray-400 border-b-[1px] border-e-com-front-secondary-variant border-opacity-50"
          >
            <div>Shop</div>
            <button (click)="drawer.close()" mat-icon-button>
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </ng-container>
        <button
          (click)="handleMenuClick('all')"
          class="flex items-center gap-4 p-2 text-sm lg:text-base hover:text-e-com-front-accent transition-colors duration-300"
          [ngClass]="{
            'bg-e-com-front-secondary bg-opacity-70  rounded-md':
              content === 'all'
          }"
        >
          <mat-icon class="text-e-com-front-secondary-variant"
            >local_florist</mat-icon
          >
          Shop all
        </button>
        <button
          (click)="handleMenuClick('brand')"
          class="flex items-center gap-4 p-2 text-sm lg:text-base hover:text-e-com-front-accent transition-colors duration-300"
          [ngClass]="{
            'bg-e-com-front-secondary bg-opacity-70  rounded-md':
              content === 'brand'
          }"
        >
          <mat-icon class="text-e-com-front-secondary-variant"
            >local_offer</mat-icon
          >
          By brand
        </button>
        <button
          (click)="handleMenuClick('category')"
          class="flex items-center gap-4 p-2 text-sm lg:text-base hover:text-e-com-front-accent transition-colors duration-300"
          [ngClass]="{
            'bg-e-com-front-secondary bg-opacity-70  rounded-md':
              content === 'category'
          }"
        >
          <mat-icon class="text-e-com-front-secondary-variant"
            >category</mat-icon
          >
          By category
        </button>
      </section>
    </mat-drawer>

    <section class="h-full flex flex-col">
      <div class="p-2">
        <button mat-icon-button (click)="drawer.toggle()">
          <ng-container *ngIf="!drawer.opened; else showChevronIcon">
            <mat-icon title="Expand menu">vertical_split</mat-icon>
          </ng-container>
        </button>
        <ng-container *ngIf="!isViewOnMobile || !drawer.opened">
          {{ content | titlecase }}
        </ng-container>
      </div>

      <section class="h-full flex">
        <ng-container [ngSwitch]="content">
          <ng-container *ngSwitchCase="'all'">
            <div class="w-full h-full">
              <cdk-virtual-scroll-viewport
                appendOnly
                itemSize="50"
                class="w-full h-full"
              >
                <ng-content select="[all]"></ng-content>
              </cdk-virtual-scroll-viewport>
            </div>
          </ng-container>
          <ng-container *ngSwitchCase="'brand'">
            <div class="w-full h-full">
              <cdk-virtual-scroll-viewport
                appendOnly
                itemSize="50"
                class="w-full h-full"
              >
                <ng-content select="[brand]"></ng-content>
              </cdk-virtual-scroll-viewport>
            </div>
          </ng-container>
          <ng-container *ngSwitchCase="'category'">
            <div class="w-full h-full">
              <cdk-virtual-scroll-viewport
                appendOnly
                itemSize="50"
                class="w-full h-full"
              >
                <ng-content select="[category]"></ng-content>
              </cdk-virtual-scroll-viewport>
            </div>
          </ng-container>
        </ng-container>
      </section>
    </section>
  </mat-drawer-container>
</ui-layout>

<ng-template #showChevronIcon>
  <mat-icon title="Minimise menu">chevron_left</mat-icon>
</ng-template>
